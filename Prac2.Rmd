---
title: "Titanic PRA2: Limpieza y análisis de datos"
author: "María Angeles Fuentes Expósito, Norberto Jesús de la Cruz Falcón"
date: '`r format(Sys.Date(),"%e de %B, %Y")`'
output:
  html_document:
    toc: yes
  pdf_document:
    toc: yes
##bibliography: dataclean.bib
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r }
# dplyr
if (!require('dplyr')) install.packages('dplyr')
library(dplyr)
# ggplot
if (!require('ggplot2')) install.packages('ggplot2')
library(ggplot2)
library(VIM)
library(PerformanceAnalytics)
red_col <- "#cc4533"
```

## 1. Descripción del dataset. ¿Por qué es importante y qué pregunta/problema pretende responder?

*Estado del arte*
El Titanic....

*Justificación*
El problema asdsad...


El dataset está formado por las siguientes variables:


| Variable    | Definición                                                            | Clave                                            |
|-------------|-----------------------------------------------------------------------|--------------------------------------------------|
| PassengerId | Número identificador del pasajero                                     |                                                  |
| Survived    | Variable dicotómica que indica si el pasajero sobrevivió al naufragio | 0 = No, 1 = Yes                                  |
| Pclass      | Ticked de Clase a la que pertenecía el pasajero                       | 1 = 1st, 2 = 2nd, 3 = 3rd                        |
| Name        | Nombre y apellidos del pasajero                                       |                                                  |
| Sex         | Género del pasajero                                                   |                                                  |
| Age         | Edad del pasajero                                                     |                                                  |
| SibSp       | Número de hermanos o de cónyuges que tenía el pasajero a bordo        |                                                  |
| Parch       | Número de hijos o padres que tenía el pasajero a bordo                |                                                  |
| Ticket      | Número identificador del ticket                                       |                                                  |
| Fare        | Tarifa del billete del pasajero en libras esterlinas                  |                                                  |
| Cabin       | Cabina asignada al pasajero                                           |                                                  |
| Embarked    | Puerto en el que embarcó el pasajero                                  | C = Cherbourg, Q = Queenstown, S = Southampton   |





## 2. Integración y selección de datos de interés

Integración y selección de los datos de interés a analizar. Puede ser el resultado de adicionar diferentes datasets o una subselección útil de los datos originales, en base al objetivo que se quiera conseguir.

Cargamos el conjunto de datos y observamos que está formado por 891 registros y las 12 variables comentadas en el apartado anterior.
```{r}
df.origen <- read.csv('train.csv')
dim(df.origen)
```
```{r }
head(df.origen)
```

Las variables *Name* y *Ticket* no serán de utilidad para los análisis estadísticos por lo que las eliminaremos.
```{r}
df <- df.origen %>% select(-c(Name, Ticket))
head(df)
```
Observamos que los atributos cualitativos *Pclass* , *Sex* y *Cabin* no se han cargado como tipo Factor, por lo que se ajustan los tipos de las variables al tipo que corresponde (Factor) 

```{r }
unique(df$Pclass)
class(df$Pclass)
df$Pclass<-factor(df$Pclass)
class(df$Pclass)
unique(df$Sex)
class(df$Sex)
df$Sex<-factor(df$Sex)
class(df$Sex)
class(df$Cabin)
df$Cabin<-factor(df$Cabin)
class(df$Cabin)
```

```{r}
unique(df$Cabin)
```

Hemos seleccionado y configurado los atributos de interés del dataset de supervivientes de Titanic y realizado la primera vista de los registros.


## 3. Limpieza de los datos.

### 3.1 Valores perdidos.

una de las tecnicas de limpieza de los datos es la eliminación de los valores nulos o missing data, pero se han de analizar ya que podríamos perder información relevante contenida en dichos registros. Lo primero que se ha de hacer es visualizar el conjunto de datos y capturar los valores nulos NA's.

```{r}
summary(df)
```
Observamos que la variable *Age* tiene 177 valores nulos, si eliminamos estos registros perdemos un 10% de los datos del conjunto, por lo que procedemos a evaluarlos para realizar una imputación adecuada para estos registros. Analizaremos si existe alguna relación con otros factores, como *PClass* y *Age*

```{r}
sum(is.na(df$Age))
sum(is.na(df[df$Pclass == 1,]$Age))
sum(is.na(df[df$Pclass == 2,]$Age))
sum(is.na(df[df$Pclass == 3,]$Age))
```

Se observa que existen 177 valores perdidos en las edades de los pasajeros del Titanic, y que además la mayor parte (136) pertenece a los pasajeros de tercera clase. Este dato puede ser interesante para el estudio posterior y conclusiones del análisis.

Procedemos a agrupar los registros perdidos en la tercera clase para ver si existe relación con el género de los pasajeros.

```{r}
df.NA <- df %>%  filter(is.na(df$Age))
p <- ggplot(data = df.NA, aes(Pclass, PassengerId, fill = Sex))
p + geom_bar(stat = "identity", names.arg = df.NA$Pclass)
```



```{r}
#Función de Imputación de los registros de edad mediante la técnica de clustering kNN
age_imput<- function( pClass){
    df.pClass <- df[df$Pclass == pClass,]
    df.m <- df.pClass[df.pClass$Sex == 'male',]
    df.f <- df.pClass[df.pClass$Sex == 'female',]
    df.f <- kNN(df.f, variable= c("Age"), k=11)
    df.m <- kNN(df.m, variable= c("Age"), k=11)
    rbind(df.m, df.f)
}
```

```{r}
summary (df$Age)
df <- rbind(age_imput(1),age_imput(2),age_imput(3))
summary (df$Age)
```
Ahora sí hemos imputado las edades para todos los pasajeros y no hemos de eliminar ningún registro.


En la variable *Survived* no se observan valores pérdidos.
```{r}
levels(as.factor(df$Survived))
```
Tampoco se observan valores pérdidos en la variable Pclass. La variable Pclass únicamente toma los valores 1, 2 y 3.

```{r}
levels(as.factor(df$Pclass))
```
La variable *Sex* toma sólo dos valores *male* y *female* y no existen valores pérdidos.


```{r}
levels(as.factor(df$Sex))
```

```{r}
ggplot(data=df, mapping=aes(Sex)) + geom_bar(fill = "#73edff") + ggtitle("Distribución de la variable sexo") + theme(plot.title = element_text(hjust = 0.5))
```
Tampoco se observan valores pérdidos en la variable *Parch* ni en la variable *SibSp*.

```{r}
ggplot(data=df, mapping=aes(Parch)) + geom_bar(fill="#73edff") + ggtitle("Distribución del número de hijos o padres en el barco") + theme(plot.title = element_text(hjust = 0.5))
```

```{r}
ggplot(data=df, mapping=aes(SibSp)) + geom_bar(fill="#73edff") + ggtitle("Distribución del número de hermanos o cónyuges en el barco") + theme(plot.title = element_text(hjust = 0.5))
```


Entre el pasaje de segunda y tercera clase seiscientos inmigrantes en busca de una oportunidad que viajan en condiciones muy diferentes a aquellos ilustres viajeros.

```{r}
nrow(df %>% filter(Cabin == ""))
```
Por el contrario, existen valores vacíos en la variable *Cabin*. En concreto, más de la mitad de los registros tienen valores vacíos en la variable *Cabin* (529 de 891).

```{r}
df$has_cabin <- ifelse(df$Cabin %in% "", "Sin cabina", "Con cabina")
pie (table(df$has_cabin), main = "Pasajeros con/sin cabina")
```

```{r}
pie (table(df$Embarked), main = "Pasajeros por puertos de embarque")
```


```{r}
head(df)
```



Por último se encuentran dos registros con valores pérdidos en la variable *Embarked*. Se eliminan estos dos registros.
```{r}
table(as.factor(df$Embarked))
```

```{r}
df <- df %>% filter(Embarked != "")
dim(df)
```

### 3.2 Identificación y gestión de los valores extremos.

```{r}
par(mfrow = c(1, 2))
boxplot(df$Age,main="Distribución de la edad", 
        col="gray")
boxplot(df$Fare,main="Distribución del precio ticket(Fare)", 
        col="gray")
boxplot(df$SibSp,main="Distribución hermanos/cónyuges", 
        col="gray")
boxplot(df$Parch,main="Distribución padres/hijos", 
        col="gray")

```


```{r}
#resumen valores de atributo edad
summary (df$Age)
```

Los diagramas de bigotes nos dan una visual rápida sobre las distribución de los valores y los outliers. Vemos que la media de la edad ronda los 30 años, y que tenemos valores extremos entre los 60 y 80 años. No consideramos eliminarlos de la muestra, ya que pueden ser datos interesantes y no se consideran valores erróneos. 


```{r}
#resumen valores de atributo Precio del ticket
summary (df$Fare)
```
Ocurre algo, sin embargo, con el precio de los tickets, el precio medio se encuentra entre 32 y aparece un ticket con precio 512. 
Además, vemos que hay tickets que costaron 0 libras esterlinas,  

Según nuestra investigación en la red: el pasaje oscilaba entre 3 libras, los más baratos, hasta 870 libras, los más caros.


Discutimos si se trata de dato erróneo o no, y concluimos que no imputaremos estos valores extremos porque pueden ser muy valiosos a la hora de estudiar la razón y las relaciones que pudieran aparecer respecto al precio de los billetes.

A continuación distribuimos la edad según la clase: primera clase, segunda clase y tercera clase.
Los valores extremos aparecen, aunque son los que se dibujan en los límites inferiores los que levantan sospecha ya que se trata de infantes.
Los extremos superiores, a simple vista, determinan que la media de edad en las clases 2  y 3 es más joven que primera clase (30 año y 25 años frente a 38 años) y que son pocos los mayores de 55 años que viajaron en segunda y tercera clase.


```{r}
ggplot(df, aes(x =Pclass , y = Age, colour = Pclass)) +
geom_boxplot(fill = "cornsilk") +
              theme(axis.text.x = element_text(angle = 45,
                                               hjust = 1))
```
Sobre el número de hermanos o de cónyuges que tenía el pasajero a bordo, vemos que el valor parece ser bastante irrelevante, la media es 0.5, y que en tercera clase hay valores extremos de algúnas pasajeros que viajaban con hermanos o cónyuges.

```{r}
#resumen valores de número de hermanos o de cónyuges
summary (df$SibSp)
```

```{r}
par(mfrow = c(1, 2))
ggplot(df, aes(x =Pclass , y = SibSp, colour = Pclass)) +
geom_boxplot(fill = "cornsilk") +
              theme(axis.text.x = element_text(angle = 45,
                                               hjust = 1))
```


Sin embargo el atributo Parch sobre el numero de hijos o padres a bordo, vemos que hay outliers en primera y tercera clase, pero que en segunda clase si se encuentran relaciones de padres o hijos a bordo.

```{r}
#resumen valores de número de padres o hijos a bordo
summary (df$Parch)
```

```{r}
ggplot(df, aes(x =Pclass , y = Parch, colour = Pclass)) +
geom_boxplot(fill = "cornsilk") +
              theme(axis.text.x = element_text(angle = 45,
                                               hjust = 1))
```


Decidimos no tratar los outliers o valores extremos, porque pueden ser datos interesantes a tener en cuenta durante el análisis.


## 4. Análisis de los datos

### 4.1. Selección de los grupos de datos que se quieren analizar/comparar (p. e., si se van a comparar grupos de datos, ¿cuáles son estos grupos y qué tipo de análisis se van a aplicar?)


| Grupo                                       | Atributo key                                                                                     
|---------------------------------------------|----------------------------|
| Mujeres y hombres                           | Sex (Gender)               |
| Primera clase, segunda clase, tercera clase | Pclass                     |
| Superviviente y no superviviente            | Survived                   |
| Niños, adultos, ancianos                    | Age range (generated)      |


Supervivencia entre mujeres y hombres -> regresión logística con variable dependiente *Survived* y variable explicativa *Sex*

Supervivencia es mayor en los niños -> contraste de hipótesis sobre la proporción de dos muestras (niños y adultos) atributo *Age*
Supervivencia es mayor en los adultos mayores de  -> contraste de hipótesis sobre la proporción de dos muestras (niños y adultos) atributo *Age*


La supervivencia es mayor en viajeros de primera clase

Existe relacion entre el precio del billete, el puerto de embarque y la Pclase 

Los pasajeros que no tienen cabina asignada son los de segunda y tercera clase


### 4.2. Comprobación de la normalidad y homogeneidad de la varianza.

El gráfico cuantil-cuantil compara los valores del atributo con los de una variable que se distribuye normalmente(QQ plot)

```{r}
par(mfrow = c(2, 2))
#Gráfico cuantil-cuantil (QQ plot) edad de los pasajeros.
qqnorm(df$Age)
qqline(df$Age)
#Gráfico cuantil-cuantil (QQ plot) precio del ticket.
qqnorm(df$Fare)
qqline(df$Fare)

```

Otra forma de determinar si las variables Age y Fare siguen una distribución normal es emplear el test de Shapiro-Wilk. 

Para el test de Shapiro-Wilk suponemos un nivel de significancia igual a 0.05. 

Tras aplicar el test mencionado para la variable Age obtenemos un p-valor inferior al test de significancia establecido por lo que podemos determinar que la variable Age no sigue una distribución normal.

```{r}
shapiro.test(df$Age)
```

También aplicamos el test de Shappiro-Wilk para la variable Fare. Se vuelve a obtener un p-valor inferior al test de significancia por lo que también podemos determinar que la variable Fare no sigue una distribución normal.

```{r}
shapiro.test(df$Fare)
```
Dado que ambas variables no siguen una distribución normal, para estudiar la homogeneidad de la varianza se emplea el test de Fligner-Killen suponiendo un nivel de significancia igual a 0.05. Se obtiene un p-valor inferior al nivel de significancia por lo que podemos determinar que las variables Age y Fare presentan varianzas estadísticamente distintas.

```{r}
fligner.test(Age ~ Fare, data=df)
```


### 4.3. Aplicación de pruebas estadísticas para comparar los grupos de datos. En función de los datos y el objetivo del estudio, aplicar pruebas de contraste de hipótesis, correlaciones, regresiones, etc. Aplicar al menos tres métodos de análisis diferentes.

#### Supervivencia entre mujeres y hombres

A partir de un diagrama de barras podemos observar que la mayor parte de las personas que sobrevivieron al naufragio del Titanic eran mujeres. Comprobaremos este hecho con el diseño de un modelo de regresión logística con variable dependiente Survived y variable explicativa Sex.
```{r}
ggplot(df, aes(x=as.factor(Survived), fill=Sex)) + geom_bar(position = "fill") + labs(x="Survived", y="Ratio") + ggtitle("Supervivencia entre mujeres y hombres") + theme(plot.title = element_text(hjust = 0.5))
```
Creamos el modelo de regresión logística y obtenemos un coeficiente asociado al valor male de la variable Sex negativo (columna Estimate) lo que indica que la probabilidad de sobrevivir al naufragio del Titanic era menor en hombres que en mujeres.
```{r}
model_surv_sex <- glm(as.factor(Survived)~Sex, family=binomial(link=logit), data=df)
summary(model_surv_sex)
```

#### Supervivencia edad es mayor en los niños

(La proporción de niños que sobrevivieron es mayor que la proporción de adultos que sobrevivieron)
Para determinar si la supervivencia es mayor en viajeros en los niños se empleará un contraste de hipótesis sobre la proporción de dos muestras (niños y adultos). Se consideran niños a toda aquella persona menor de 18 años.


Se definen las hipótesis nula y alternativa siguientes:

- ${H_0}$: La proporción de niños que sobrevivieron es igual a la proporción de adultos.
- ${H_1}$: La proporción de niños que sobrevivieron es mayor a la proporción de adultos.

Realizamos el contraste de hipótesis con la función prop.test y obtenemos un p-valor igual a 0.001122. Se emplea un porcentaje de confianza del 95 por ciento por lo que el nivel de significancia es igual a 0.05 (1 - 95/100). Debido a que el p-valor es inferior que el nivel de significancia podemos rechazar la hipótesis nula, aceptar la hipótesis alternativa y afirmar con un 95 por ciento de confianza que la proporción de los niños que sobrevivieron es mayor que la proporción de adultos.

```{r}
df.kids <- df %>% filter(Age < 18)
df.adults <- df %>% filter(Age >= 18)
kids.surv <- sum(df.kids$Survived == 1)
adults.surv <- sum(df.adults$Survived == 1)
n.kids <- nrow(df.kids)
n.adults <- nrow(df.adults)
prop.test(c(kids.surv, adults.surv), c(n.kids,n.adults), alternative = "greater")
```


#### Supervivencia es mayor en niños que en adultos

(La proporción de niños que sobrevivieron es mayor que la proporción de adultos que sobrevivieron)
Para determinar si la supervivencia es mayor en viajeros en los niños se empleará un contraste de hipótesis sobre la proporción de dos muestras (niños y adultos). Se consideran niños a toda aquella persona menor de 18 años.


Se definen las hipótesis nula y alternativa siguientes:

- ${H_0}$: La proporción de niños que sobrevivieron es igual a la proporción de adultos.
- ${H_1}$: La proporción de niños que sobrevivieron es mayor a la proporción de adultos.

Realizamos el contraste de hipótesis con la función prop.test y obtenemos un p-valor igual a 0.001122. Se emplea un porcentaje de confianza del 95 por ciento por lo que el nivel de significancia es igual a 0.05 (1 - 95/100). Debido a que el p-valor es inferior que el nivel de significancia podemos rechazar la hipótesis nula, aceptar la hipótesis alternativa y afirmar con un 95 por ciento de confianza que la proporción de los niños que sobrevivieron es mayor que la proporción de adultos.

```{r}
df.kids <- df %>% filter(Age < 18)
df.adults <- df %>% filter(Age >= 18)
kids.surv <- sum(df.kids$Survived == 1)
adults.surv <- sum(df.adults$Survived == 1)
n.kids <- nrow(df.kids)
n.adults <- nrow(df.adults)
prop.test(c(kids.surv, adults.surv), c(n.kids,n.adults), alternative = "greater")
```





#### La supervivencia es mayor en viajeros de primera clase

En primer lugar observamos gráficamente la proporción de pasajeros de cada clase que sobrevivieron y los que no. La proporción de pasajeros de la primera clase que no sobrevivieron es menor que la proporción del restod de clases. Por otro lado, la proporción de personas de la primera clase que sobrevivieron es la mayor de las tres clases.
```{r}
ggplot(df, aes(x=as.factor(Survived), fill=Pclass)) + geom_bar(position = "fill") + labs(x="Survived", y="Ratio") + ggtitle("Supervivencia entre pasajeros de distintas clases") + theme(plot.title = element_text(hjust = 0.5))
```

Para determinar si la supervivencia es mayor en viajeros de primera clase generamos un modelo de regresión logística y calculamos los odds-ratios. Se toma el valor 1 (primera clase) como valor de referencia para la variable explicativa. Los odds-ratios nos indica la diferencia entre la probabilidad de sobrevivir al naufragio si el pasajero viaja en primera clase (valor de referencia) y la probabilidad de sobrevivir si el pasajero viaja en la segunda y en la tercera clase.

```{r}

model_surv_class <- glm(as.factor(Survived)~Pclass, family=binomial(link=logit), data=df)
summary(model_surv_class)


```
Los odds-ratios se pueden obtener a partir de los coeficientes del modelo de regresión. Obtenemos dos odds-ratio distintos uno para la segunda clase y otro para la tercera clase.

```{r}
exp(coefficients(model_surv_class))
```

El odds-ratio de la segunda clase es igual a 0.53. El hecho de obtener un odd-ratio menor que uno indica que la probabilidad de sobrevivir viajando en segunda clase es menor que si se viaja en primera clase.

El odds-ratio de la tercera clase también es inferior a la unidad por lo que podemos determinar que la probabilidad de sobrevivir viajando en la tercera clase es menor que si se viaja en la primera clase.

Por todo ello podemos concluir que la supervivencia es mayor si se viaja en la primera clase.

### Existe relacion entre la supervivencia, la edad y la clase

```{r}
elim.names <- c ("has_cabin", "Age_imp")
elim.pos <- which (names(df) %in% elim.names)
df.corr <- df[, -elim.pos]
df.corr$Pclass <- as.numeric(df.corr$Pclass)
df.corr <- df.corr %>% select(-c(Sex, Cabin, Embarked, PassengerId, SibSp, Parch, Fare))

cor(df.corr)

chart.Correlation(df.corr)
```



```{r}
df$age_label <- cut(df$Age, breaks = c(0,10,18,100),
labels = c("kid","teenager", "adult"))


model_surv_class <- glm(as.factor(Survived)~Pclass+age_label, family=binomial(link=logit), data=df)
summary(model_surv_class)

```
```{r}
#Predicción ser niño (<10 años) y viajar en primera clase
prediction_data <- list("age_label" = "kid", "Pclass" = "1")
predict(model_surv_class, newdata = prediction_data, type="response")

#Predicción ser niño (<10 años) y viajar en segunda clase
prediction_data <- list("age_label" = "kid", "Pclass" = "2")
predict(model_surv_class, newdata = prediction_data, type="response")

#Predicción ser niño (<10 años) y viajar en tercera clase
prediction_data <- list("age_label" = "kid", "Pclass" = "3")
predict(model_surv_class, newdata = prediction_data, type="response")
```

#### Existe relacion entre el precio del billete, el puerto de embarque y la Pclase 

Los de primera clase pagaron entre 113 y 512.3 libras esterlinas, mientras que quien abordó en segunda clase, pagó 75 libras por cada boleto. Quienes lo hicieron en tercera clase, pagaron entre 30 y 70 libras esterlinas por cada boleto.




```{r}

ggplot(mapping= aes(x=df$Fare))+ geom_density()
summary(df$Fare)
df$ticket_range <- cut(df$Fare, breaks = c(-1,8.000,70.000, 600.000),
labels = c(1,2, 3))

ggplot(data=df, mapping=aes(ticket_range)) + geom_bar(fill="#73edff") + ggtitle("Distribución precios por rango") + theme(plot.title = element_text(hjust = 0.5))
df$Embarked_value <- ifelse(df$Embarked == "C", 1, ifelse (df$Embarked == "Q",2, ifelse (df$Embarked == "S",3,"")))

df.chi <- df %>% select(-c(Sex, Cabin, PassengerId, SibSp, Parch, Age_imp,age_label, has_cabin, PassengerId, Survived, Pclass, Age, chi, Fare, Embarked))
df.chi$ticket_range <- as.numeric(df.chi$ticket_range)
df.chi$Embarked_value <- as.numeric(df.chi$Embarked_value)


chisq.test(df.chi)



```




### La supervivencia es mayor en pasajeros con cabina


```{r}

model_surv_class <- glm(as.factor(Survived)~Pclass, family=binomial(link=logit), data=df)
summary(model_surv_class)




```



```{r}

df.chi <- df %>% select(-c(Sex, Cabin, Embarked, PassengerId, SibSp, Parch, Fare, Age_imp,age_label, has_cabin))
df.chi$bool_cabin <- ifelse(df$has_cabin %in% "Sin cabina", 0, 1)
df.chi$Pclass <- as.numeric(df.chi$Pclass)
class(df.chi$Pclass)
#df.chi <- df.chi %>% select(-c(Sex, Cabin, Embarked, PassengerId, SibSp, Parch, Fare, Age_imp,age_label, has_cabin))

chisq.test(df.chi)

```

#### Los pasajeros que no tienen cabina asignada son los de segunda y tercera clase


```{r}

model_surv_class <- glm(as.factor(Survived)~has_cabin, family=binomial(link=logit), data=df)
summary(model_surv_class)


prediction_data <- list("has_cabin" = "Con cabina")
predict(model_surv_class, newdata = prediction_data, type="response")


prediction_data <- list("has_cabin" = "Sin cabina")
predict(model_surv_class, newdata = prediction_data, type="response")


```



### La supervivencia menor en pasajeros que viajan solos

La última relación que nos quedará analizar es si la probabilidad de sobrevivir es menor si se viajaba solo en el Titanic, es decir sin hermanos/cónyuges (SibSp) o hijos/padres (Parch) a bordo.


```{r}

df$has_sibsp <- ifelse(df$SibSp < 1, "alone", "sibs" )
df$has_Parch <- ifelse(df$Parch < 1, "alone", "parch" )

df$has_family <- ifelse(df$has_sibsp ==  "sibs" | df$has_Parch ==  "parch" , "family", "alone" )

ggplot(data=df, mapping=aes(has_family)) + geom_bar(fill="#73edff") + ggtitle("Distribución acompañantes") + theme(plot.title = element_text(hjust = 0.5))


model_surv_class <- glm(as.factor(Survived)~has_family, family=binomial(link=logit), data=df)
summary(model_surv_class)



prediction_data <- list("has_family" = "alone")
predict(model_surv_class, newdata = prediction_data, type="response")


prediction_data <- list("has_family" = "family")
predict(model_surv_class, newdata = prediction_data, type="response")


```



## 6. Resolución del problema. A partir de los resultados obtenidos, ¿cuáles son las conclusiones? ¿Los resultados permiten responder al problema? 








| Contribuciones                              | Firma                                                                                    
|---------------------------------------------|----------------------------|
| Investigación previa                        | MAFE, NJCF                 |
| Redacción de las respuestas                 | MAFE, NJCF                 |
| Desarrollo cñodigo                          | MAFE, NJCF                 |
